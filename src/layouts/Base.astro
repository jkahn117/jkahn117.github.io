---
import Layout from '@/components/Layout.astro'
import '@/css/tailwind.css'

const {
  title = 'Josh Kahn - Solutions architect, speaker, technology guy, dad',
  description = "I'm Josh, a technology guy based in Chicago, IL.",
} = Astro.props

const siteUrl = import.meta.env.PUBLIC_SITE_URL || 'https://blog.iamjkahn.com'
const fullTitle = title.endsWith('Josh Kahn') ? title : `${title} - Josh Kahn`
---

<html lang="en" class="h-full antialiased">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{fullTitle}</title>
    <meta name="description" content={description} />
    <link rel="icon" href="/favicon.ico" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Josh Kahn"
      href={`${siteUrl}/feed.xml`}
    />
    <!-- Beam Analytics -->
    <script
      src="https://beamanalytics.io/beam.min.js"
      data-token="bc31214f-5579-438d-b781-416b8f686177"
      async
    ></script>
    <!-- Dark mode: apply saved preference before first paint to prevent flash -->
    <script is:inline>
      ;(function () {
        var stored = localStorage.getItem('theme')
        var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches
        if (stored === 'dark' || (!stored && prefersDark)) {
          document.documentElement.classList.add('dark')
        }
      })()
    </script>
  </head>
  <body class="flex h-full bg-zinc-50 dark:bg-black">
    <div class="flex w-full">
      <Layout>
        <slot />
      </Layout>
    </div>
  </body>
</html>
